영상: [[따라學 IT] 04. 실제로 컴퓨터끼리는 IP주소를 사용해 데이터를 주고받는다](https://youtu.be/s5kIGnaNFvM?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi)

## 3계층의 기능

### 3계층에서 하는 일

- 다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일 담당
  ⇒ 서로 다른 LAN을 연결
- LAN과 LAN을 연결(통신)하기 위해 3계층 장비가 필요
  ⇒ 라우터
- 발신에서 착신까지의 패킷의 경로 제어

### 3계층에서 사용하는 주소

- IP 주소 : WAN에서 통신할 때 사용하는 주소, 3계층 주소 체계

> IPv4 주소 : 현재 PC에 할당된 IP 주소
> 서브넷 마스크 : IP 주소에 대한 네트워크 대역을 규정하는 것
> 게이트웨이 주소 : 외부와 통신할 때 사용하는 네트워크의 출입문

멀리 있는 것과 통신하기 위해 IP주소, 서브넷 마스크, 게이트웨이가 필요하다.
하지만 인터넷에서 통신할 때는 도메인 주소로 통신한다.

### 3계층 프로토콜

- IP 주소를 이용해 MAC 주소를 알아오는 ARP 프로토콜
- WAN에서 통신할 때 사용하는 IPv4 프로토콜
- 서로가 통신되는지 확인할 때 사용하는 ICMP 프로토콜

## 일반적인 IP 주소

일반적인 IP 주소라고 하면 IPv4 주소를 의미

### IP 주소 표기 방식

- 10진수로 표기
- 각 필드를 `.`으로 구분 (예: 192.168.0.100 )
- 각 필드는 0~255까지 올 수 있고 이는 1바이트로 표현할 수 있는 수
  ⇒ `0.0.0.0` ~ `255.255.255.255`

### Classful IP 주소

- 클래스 별로 네트워크 대역을 구분하여 IP 주소를 사용
- 사용하지 않는 IP 주소가 낭비 됨

| 클래스               | 네트워크 구분          | 시작 주소 | 마지막 주소     |
| -------------------- | ---------------------- | --------- | --------------- |
| A 클래스             | 0xxxxxxx, 첫 번째 필드 | 0.0.0.0   | 127.255.255.255 |
| B 클래스             | 10xxxxxx, 두 번째 필드 | 128.0.0.0 | 191.255.255.255 |
| C 클래스             | 110xxxxx, 세 번째 필드 | 192.0.0.0 | 223.255.255.255 |
| D 클래스(멀티캐스트) | 1110xxxx               | 224.0.0.0 | 239.255.255.255 |
| E 클래스(예약)       | 1111xxxx               | 240.0.0.0 | 255.255.255.255 |

### Classless IP 주소

- Classful IP 주소의 낭비 문제를 해결하기 위해 사용
- 하나의 큰 네트워크를 여러 개의 작은 네트워크로 쪼개서 사용
- 서브넷 마스크 : 클래스풀한 네트워크 대역을 나눠주는데 사용하는 값
- 서브넷팅 : 서브넷 마스크를 통해 하나의 네트워크 대역을 잘게 쪼개는 것

![](https://i.imgur.com/usTjIqp.png)

### 사설 IP와 공인 IP

- 공인 IP : 실제 네트워크 통신망과 통신할 때 사용하는 IP주소
- 사설 IP : 같은 네트워크 대역에서 사용하는 IP 주소
- 사설 IP 사용하고 있는 장비들이 네트워크 통신을 할 때 공인 IP로 바꿔서 인터넷과 통신
  - 실제 인터넷 세상에서는 공인 IP로만 통신
  - 외부 네트워크 대역에서는 사설 IP 대역이 보이지 않는다.
  - 외부 네트워크와 통신할 때 NAT Table에 해당하는 사설 IP를 기록하고 외부 네트워크에서 응답이 올 때 해당하는 기록을 보고 해당하는 사설 IP로 데이터를 전달
- NAT(Network Address Translation)
  - 특정 IP를 특정 IP로 바꿔주는 것
  - 이것을 이용해 공인IP와 사설IP를 이용하여 IP 부족현상을 해결

## 특수한 IP 주소

### 0.0.0.0

- **나머지** 모든 IP

### 127.0.0.1

- 나 자신을 나타내는 주소

### 게이트웨이

- 어딘가로 가려면 일단 여기로 게이트 웨이 주소
- 외부 세상이 어딘지 알려주는 값
