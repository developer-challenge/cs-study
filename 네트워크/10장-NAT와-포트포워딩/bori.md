# 10장 NAT와 포트포워딩

## NAT(Network Adderss Translation)

- IP 패킷의 TCP/UDP 포트 숫자와 소스 및 목적지의 IP 주소 등을 재기록하면서 라우터를 통해 네트워크 트래픽을 주고 받는 기술
  - 패킷에 변화가 생기기 때문에 IP나 TCP/UDP의 체크섬도 다시 계산되어 재기록
- 대개 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP 주소를 사용하여 외부 네트워크와 통신을 하기 위해 사용하지만 꼭 사설 IP를 공인 IP로 변환하는데에만 사용하는 기술은 아니다.
- NAT 테이블 : 특정 출발지 IP와 특정 목적지 IP를 가진 네트워크 패킷이 NAT를 통해 변환되게 되면 NAT 테이블에 기록하고 해당 패킷이 다시 돌아왔을 때 기록해둔 내용을 보고 원래의 출발지 경로로 패킷을 보내준다.

⇒ NAT는 내부 네트워크에서 외부 네트워크로 요청을 보낼 때 매핑 정보를 기록하여 그 응답을 받을 수 있도록 하는 방법

## 포트포워딩

- 포트포워딩 또는 포트 매핑(port mapping)은 패킷이 라우터나 방화벽과 같은 네트워크 장비를 가로지르는 동안 **특정 IP 주소와 포트 번호의 통신 요청을 특정 다른 IP와 포트번호로 넘겨주는** 네트워크 주소 변환(NAT)의 응용
- 게이트웨이(외부망)의 반대쪽에 위치한 사설 네트워크에 상주하는 호스트에 대한 서비스를 생성하기 위해 흔히 사용

외부에서 내부 네트워크로 접근하기 위해 공유기의 특정한 포트 번호로 들어오는 요청을 미리 매핑된 내부 네트워크의 기기로 포워딩 해주는 기술

- 공인 IP의 특정 포트로 전송
- 요청 패킷을 받은 공유기가 특정 포트로 들어온 요청을 다른 특정 IP의 특정 포트로 전송
- 포트포워딩을 사용하기 위해 미리 공유기에 특정 포트번호와 사설 IP 주소를 매핑해 두어야 한다.
